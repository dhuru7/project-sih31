</div> <!-- End profile-details -->
</div> <!-- End profile-card -->
</div> <!-- End col-span-2 -->
</div> <!-- End grid -->
</main>

<!-- Bottom Navigation (Redesigned) -->
<div class="fixed bottom-0 left-0 right-0 z-50 p-4 sm:hidden">
    <nav class="nav-content-wrapper max-w-[280px] mx-auto flex justify-between items-center px-6 py-3 rounded-full">
        <a href="index.html" id="bottom-nav-home"
            class="nav-link text-[var(--text-muted)] hover:text-[var(--text-primary)] transition-colors">
            <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round"
                    d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h7.5" />
            </svg>
        </a>
        <a href="search.html" id="bottom-nav-search"
            class="nav-link text-[var(--text-muted)] hover:text-[var(--text-primary)] transition-colors">
            <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round"
                    d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z" />
            </svg>
        </a>
        <a href="report.html" id="bottom-nav-report" class="flex items-center justify-center">
            <div
                class="btn-cta text-white w-12 h-12 rounded-full transition duration-300 ease-in-out transform hover:scale-110 flex items-center justify-center shadow-lg -mt-8 border-4 border-[var(--bg-primary)] bg-[var(--accent-primary)]">
                <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
                </svg>
            </div>
        </a>
        <button id="settings-btn-mobile"
            class="nav-link text-[var(--text-muted)] hover:text-[var(--text-primary)] transition-colors">
            <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round"
                    d="M10.5 6h9.75M10.5 6a1.5 1.5 0 11-3 0m3 0a1.5 1.5 0 10-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-9.75 0h9.75" />
            </svg>
        </button>
        <a href="profile.html" id="bottom-nav-profile"
            class="nav-link active text-[var(--text-primary)] transition-colors">
            <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round"
                    d="M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z" />
            </svg>
        </a>
    </nav>
</div>
</div>

<!-- Settings Side Panel -->
<div id="settings-panel"
    class="fixed top-0 right-0 h-full bg-[var(--bg-secondary)] border-l border-[var(--border-light)] w-80 max-w-full shadow-lg z-[120] transform translate-x-full transition-transform duration-300 ease-in-out">
    <div class="flex flex-col h-full">
        <div class="p-4 border-b border-[var(--border-light)] flex-shrink-0">
            <div class="flex justify-between items-center">
                <h2 class="text-xl font-bold text-[var(--text-primary)]">Settings</h2>
                <button id="close-settings-btn" class="p-1 rounded-full hover:bg-[var(--bg-accent)]">
                    <svg class="w-6 h-6 text-[var(--text-muted)]" xmlns="http://www.w3.org/2000/svg" fill="none"
                        viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
        </div>
        <div class="p-4 flex-grow overflow-y-auto">
            <div class="space-y-6">
                <div>
                    <label class="text-sm font-semibold text-[var(--text-muted)] px-1">Appearance</label>
                    <div class="mt-2 flex items-center justify-between p-3 bg-[var(--bg-primary)] rounded-lg">
                        <span class="font-medium text-[var(--text-primary)]">Theme</span>
                        <button id="theme-toggle-settings"
                            class="p-2 rounded-md bg-[var(--bg-secondary)] border border-[var(--border-light)]"
                            aria-label="Toggle theme">
                            <svg class="w-5 h-5 sun-icon text-yellow-500" fill="none" stroke="currentColor"
                                viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z">
                                </path>
                            </svg>
                            <svg class="w-5 h-5 hidden moon-icon text-blue-300" fill="none" stroke="currentColor"
                                viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z">
                                </path>
                            </svg>
                        </button>
                    </div>
                </div>
                <div>
                    <label class="text-sm font-semibold text-[var(--text-muted)] px-1">Animation</label>
                    <div class="mt-2 flex items-center justify-between p-3 bg-[var(--bg-primary)] rounded-lg">
                        <span class="font-medium text-[var(--text-primary)]">Dynamic Animation</span>
                        <label for="animation-toggle" class="relative inline-flex items-center cursor-pointer">
                            <input type="checkbox" value="" id="animation-toggle" class="sr-only peer">
                            <div
                                class="w-11 h-6 bg-[var(--border-medium)] rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-[var(--accent-primary)]">
                            </div>
                        </label>
                    </div>
                </div>
                <div>
                    <label class="text-sm font-semibold text-[var(--text-muted)] px-1">Content</label>
                    <div class="mt-2">
                        <button id="language-btn-settings"
                            class="w-full flex items-center justify-between text-left p-3 bg-[var(--bg-primary)] rounded-lg">
                            <!-- === MODIFIED: Added 'notranslate' class === -->
                            <span id="current-lang-text-settings"
                                class="font-medium text-[var(--text-primary)] notranslate">English</span>
                            <svg id="language-arrow"
                                class="w-5 h-5 text-[var(--text-muted)] transition-transform duration-300"
                                xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                                stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
                            </svg>
                        </button>
                        <div id="language-list-settings" class="mt-2 space-y-1">
                            <!-- Language items will be populated by JS here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="settings-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-[115] hidden"></div>

    <div id="setu-ai-container-desktop"
        class="fixed bottom-6 right-6 z-[100] hidden sm:flex flex-col items-end space-y-4">
        <div id="ai-response-box"
            class="bg-[var(--bg-secondary)] p-4 rounded-2xl shadow-xl max-w-xs w-80 mb-2 hidden transform transition-all duration-300 origin-bottom-right border border-[var(--border-light)]">
            <div class="flex justify-between items-center mb-2">
                <div class="flex items-center space-x-2">
                    <div class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></div>
                    <span class="text-xs font-semibold text-[var(--text-muted)] uppercase tracking-wider">Setu AI</span>
                </div>
                <button id="close-ai-response" class="text-[var(--text-muted)] hover:text-[var(--text-primary)]">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12">
                        </path>
                    </svg>
                </button>
            </div>
            <div id="ai-response-text" class="text-sm text-[var(--text-primary)] leading-relaxed">
                Hello! I'm Setu AI. How can I help you today?
            </div>
        </div>
        <button id="setu-ai-btn-desktop"
            class="btn btn-cta !p-4 !rounded-full shadow-lg transform hover:scale-110 transition-transform duration-200 ai-widget-container">
            <svg class="w-8 h-8 flex-shrink-0 text-white original-icon" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12.0001 1.99219L3.45911 12.0002L12.0001 22.0082L20.5411 12.0002L12.0001 1.99219Z" />
            </svg>
            <div class="listening-indicator absolute inset-0 rounded-full border-4 border-white opacity-0"></div>
        </button>
    </div>

    <div id="ai-info-modal-overlay"
        class="fixed inset-0 bg-black bg-opacity-60 backdrop-filter backdrop-blur-sm z-[130] hidden items-center justify-center p-4">
        <div id="ai-info-modal"
            class="bg-[var(--bg-secondary)] rounded-2xl shadow-xl max-w-sm w-full p-6 text-center transform scale-95 opacity-0 transition-all duration-300 ease-out">
            <div class="mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-[var(--bg-accent)] mb-4">
                <svg class="w-8 h-8 text-[var(--accent-primary)]" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12.0001 1.99219L3.45911 12.0002L12.0001 22.0082L20.5411 12.0002L12.0001 1.99219Z" />
                </svg>
            </div>
            <h3 class="text-xl font-bold text-[var(--text-primary)] mb-2">Setu AI is Evolving!</h3>
            <p class="text-sm text-[var(--text-muted)] mb-6">
                Thank you for trying our new AI assistant! This feature is currently under active development. While it
                can perform some basic tasks, we're working hard to unlock its full potential. Stay tuned for exciting
                updates!
            </p>
            <button id="ai-info-got-it-btn" class="btn btn-primary w-full">Got it</button>
        </div>
    </div>

    <div id="toast-notification" class="toast"></div>

    <div id="google_translate_element"></div>

    <script>
        function googleTranslateElementInit() { new google.translate.TranslateElement({ pageLanguage: 'en', includedLanguages: 'en,hi,bn,te,mr,ta,ur,gu,kn,ml,pa,or,as,ne', layout: google.translate.TranslateElement.InlineLayout.SIMPLE, autoDisplay: false }, 'google_translate_element'); }
        function getCookie(name) { let value = "; " + document.cookie; let parts = value.split("; " + name + "="); if (parts.length === 2) return parts.pop().split(';').shift(); return null; }
        function setCookie(name, value, days = 365) { let expires = ""; if (days) { const date = new Date(); date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000)); expires = "; expires=" + date.toUTCString(); } document.cookie = name + "=" + (value || "") + expires + "; path=/; SameSite=Lax"; }

        window.addEventListener('load', () => {
            const savedLang = localStorage.getItem('selectedLanguage') || 'en';
            const googCookie = getCookie('googtrans') || '';
            const expectedCookie = savedLang === 'en' ? '' : '/en/' + savedLang;
            if (googCookie.replace(/"/g, '') !== expectedCookie) { if (savedLang === 'en') { document.cookie = 'googtrans=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/'; } else { setCookie('googtrans', expectedCookie); } setTimeout(() => window.location.reload(), 200); return; }
        });

        document.addEventListener('DOMContentLoaded', () => {

            const UI = {
                animatedNameDesktopSidebar: document.getElementById('animated-name-desktop-sidebar'),
                animatedNameMobile: document.getElementById('animated-name-mobile'),
                themeToggle: document.getElementById('theme-toggle-settings'),
                sunIcons: document.querySelectorAll('.sun-icon'),
                moonIcons: document.querySelectorAll('.moon-icon'),
                animationToggle: document.getElementById('animation-toggle'), // New animation toggle
                languageBtn: document.getElementById('language-btn-settings'),
                languageList: document.getElementById('language-list-settings'),
                languageArrow: document.getElementById('language-arrow'),
                currentLangText: document.getElementById('current-lang-text-settings'),
                settingsBtnDesktop: document.getElementById('settings-btn-desktop'),
                settingsBtnMobile: document.getElementById('settings-btn-mobile'),
                settingsPanel: document.getElementById('settings-panel'),
                settingsOverlay: document.getElementById('settings-overlay'),
                closeSettingsBtn: document.getElementById('close-settings-btn'),
                mobileHeader: document.getElementById('mobile-header'),
                profile: { avatar: document.getElementById('profile-avatar'), fullName: document.getElementById('profile-fullname'), city: document.getElementById('profile-city'), aadhaar: document.getElementById('aadhaar-value'), dob: document.getElementById('dob-value'), mobile: document.getElementById('mobile-value'), email: document.getElementById('email-value'), address: document.getElementById('address-value') },
                avatarContainer: document.getElementById('avatar-container'),
                avatarInput: document.getElementById('avatar-input'),
                buttons: { container: document.getElementById('button-container'), edit: document.getElementById('edit-btn'), save: document.getElementById('save-btn'), cancel: document.getElementById('cancel-btn') },
                toast: document.getElementById('toast-notification'),
                aiInfoModalOverlay: document.getElementById('ai-info-modal-overlay'),
                aiInfoModal: document.getElementById('ai-info-modal'),
                aiInfoGotItBtn: document.getElementById('ai-info-got-it-btn'),
            };

            let currentUserData = {}; let isEditMode = false;
            const LANGUAGES = { 'en': { name: 'English', short: 'EN' }, 'hi': { name: 'हिन्दी', short: 'HI' }, 'bn': { name: 'বাংলা', short: 'BN' }, 'te': { name: 'తెలుగు', short: 'TE' }, 'mr': { name: 'मराठी', short: 'MR' }, 'ta': { name: 'தமிழ்', short: 'TA' }, 'ur': { name: 'اردو', short: 'UR' }, 'gu': { name: 'ગુજરાતી', short: 'GU' }, 'kn': { name: 'ಕನ್ನಡ', short: 'KN' }, 'ml': { name: 'മലയാളം', short: 'ML' }, 'pa': { name: 'ਪੰਜਾਬੀ', short: 'PA' }, 'or': { name: 'ଓଡ଼ିଆ', short: 'OR' }, 'as': { name: 'অসমীয়া', short: 'AS' }, 'ne': { name: 'नेपाली', short: 'NE' } };

            const applyTheme = t => { const isDark = t === 'dark'; document.documentElement.setAttribute('data-theme', isDark ? 'dark' : 'light'); UI.sunIcons.forEach(i => i.classList.toggle('hidden', isDark)); UI.moonIcons.forEach(i => i.classList.toggle('hidden', !isDark)); };
            const setupTheme = () => { const i = localStorage.getItem('theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'); applyTheme(i); UI.themeToggle.addEventListener('click', () => { const n = document.documentElement.getAttribute('data-theme') === 'dark' ? 'light' : 'dark'; localStorage.setItem('theme', n); applyTheme(n); }); };

            // NEW: Setup for Animation Preference
            const setupAnimationPreference = () => {
                const savedPref = localStorage.getItem('animationPreference') || 'solid'; // Default to solid
                UI.animationToggle.checked = savedPref === 'modern';

                UI.animationToggle.addEventListener('change', () => {
                    const preference = UI.animationToggle.checked ? 'modern' : 'solid';
                    localStorage.setItem('animationPreference', preference);
                });
            };

            const setupLogoAnimation = () => { const names = ['Setu', 'सेतु', 'সেতু', 'सेतू', 'સેતુ', 'ಸೇತು']; let currentIndex = 0; const logoElements = [UI.animatedNameDesktopSidebar, UI.animatedNameMobile].filter(el => el); if (logoElements.length === 0) return; setInterval(() => { logoElements.forEach(el => el.classList.add('fade-out')); setTimeout(() => { currentIndex = (currentIndex + 1) % names.length; logoElements.forEach(el => { el.textContent = names[currentIndex]; el.classList.remove('fade-out'); }); }, 400); }, 4000); };

            // === MODIFIED: Added 'notranslate' class to dropdown items ===
            const populateLanguageList = () => { const html = Object.entries(LANGUAGES).map(([c, { name, short }]) => `<a href="#" class="dropdown-item notranslate flex justify-between items-center !p-2 !rounded-md" data-lang="${c}" data-name="${name}"><span class="notranslate">${name}</span><span class="language-indicator notranslate !bg-[var(--bg-accent)] !text-[var(--text-primary)]">${short}</span></a>`).join(''); UI.languageList.innerHTML = html; };
            const restoreLanguageDisplay = () => { const l = localStorage.getItem('selectedLanguage') || 'en'; const n = localStorage.getItem('selectedLanguageName') || 'English'; UI.currentLangText.textContent = n; };

            const setupLanguageSwitcher = () => {
                const langBtn = UI.languageBtn;
                const langList = UI.languageList;
                const langArrow = UI.languageArrow;

                langBtn.addEventListener('click', e => {
                    e.stopPropagation();
                    const isExpanded = langList.style.maxHeight && langList.style.maxHeight !== '0px';
                    if (isExpanded) {
                        langList.style.maxHeight = '0px';
                        langArrow.classList.remove('rotate-180');
                    } else {
                        langList.style.maxHeight = langList.scrollHeight + 'px';
                        langArrow.classList.add('rotate-180');
                    }
                });

                const handler = e => {
                    const item = e.target.closest('.dropdown-item');
                    if (item) {
                        e.preventDefault();
                        const l = item.dataset.lang, n = item.dataset.name;
                        localStorage.setItem('selectedLanguage', l);
                        localStorage.setItem('selectedLanguageName', n);
                        if (l === 'en') {
                            document.cookie = 'googtrans=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';
                        } else {
                            document.cookie = `googtrans=/en/${l}; path=/;`;
                        }
                        location.reload();
                    }
                };
                langList.addEventListener('click', handler);
            };

            const openSettingsPanel = () => { UI.settingsPanel.classList.remove('translate-x-full'); UI.settingsOverlay.classList.remove('hidden'); };
            const closeSettingsPanel = () => { UI.settingsPanel.classList.add('translate-x-full'); UI.settingsOverlay.classList.add('hidden'); };

            function loadUserProfile() { const storedData = localStorage.getItem('userProfile'); const parsedData = storedData ? JSON.parse(storedData) : {}; currentUserData = { fullname: parsedData.fullname || 'Guest User', city: parsedData.city || 'Your City', aadhaar: parsedData.idCard || '000000000000', dob: parsedData.dob || '1990-01-01', mobile: parsedData.mobile || '9876543210', email: parsedData.email || 'guest@example.com', address: parsedData.address || "Please add your address.", avatar: parsedData.avatar || 'https://placehold.co/128x128/E1E2E2/1D2228?text=User' }; UI.profile.avatar.src = currentUserData.avatar; displayProfileData(); }
            function displayProfileData() { UI.profile.fullName.textContent = currentUserData.fullname || 'N/A'; UI.profile.city.textContent = currentUserData.city || 'Your City'; const aadhaar = currentUserData.aadhaar || ''; if (aadhaar.toUpperCase().startsWith('ID')) { UI.profile.aadhaar.textContent = `********${aadhaar.slice(-4)}`; } else { UI.profile.aadhaar.textContent = aadhaar ? `•••• •••• ${aadhaar.slice(-4)}` : 'N/A'; } const dob = currentUserData.dob; if (dob) { const birthDate = new Date(dob); const age = new Date().getFullYear() - birthDate.getFullYear(); UI.profile.dob.textContent = `${dob} (${age} years old)`; } else { UI.profile.dob.textContent = 'N/A'; } UI.profile.mobile.textContent = currentUserData.mobile || 'N/A'; UI.profile.email.textContent = currentUserData.email || 'N/A'; UI.profile.address.textContent = currentUserData.address || "Click 'Edit Profile' to add your address."; }
            function toggleEditMode(enable) { isEditMode = enable; UI.buttons.edit.classList.toggle('hidden', enable); UI.buttons.save.classList.toggle('hidden', !enable); UI.buttons.cancel.classList.toggle('hidden', !enable); if (enable) { UI.profile.fullName.innerHTML = `<input type="text" id="fullname-input" class="form-input text-center" value="${currentUserData.fullname}">`; UI.profile.city.innerHTML = `<input type="text" id="city-input" class="form-input text-center" value="${currentUserData.city}">`; UI.profile.dob.innerHTML = `<input type="date" id="dob-input" class="form-input" value="${currentUserData.dob}">`; UI.profile.mobile.innerHTML = `<input type="tel" id="mobile-input" class="form-input" value="${currentUserData.mobile}">`; UI.profile.email.innerHTML = `<input type="email" id="email-input" class="form-input" value="${currentUserData.email}">`; UI.profile.address.innerHTML = `<textarea id="address-input" class="form-input" rows="2">${currentUserData.address || ''}</textarea>`; } else { displayProfileData(); } }
            function saveProfileChanges() { currentUserData = { ...currentUserData, fullname: document.getElementById('fullname-input').value, city: document.getElementById('city-input').value, dob: document.getElementById('dob-input').value, mobile: document.getElementById('mobile-input').value, email: document.getElementById('email-input').value, address: document.getElementById('address-input').value }; localStorage.setItem('userProfile', JSON.stringify(currentUserData)); toggleEditMode(false); showToast('Profile updated successfully!'); }
            function showToast(message) { UI.toast.textContent = message; UI.toast.classList.add('show'); setTimeout(() => UI.toast.classList.remove('show'), 3000); }

            // --- Setu AI Logic ---
            const isDesktop = () => window.innerWidth >= 640;

            function generatePageSummary() {
                const summaryPoints = [];
                if (!currentUserData || Object.keys(currentUserData).length === 0) { return ["No user profile data is available to summarize."]; }
                summaryPoints.push(`The user's name is ${currentUserData.fullname}.`);
                summaryPoints.push(`They live in ${currentUserData.city}.`);
                if (currentUserData.email) { summaryPoints.push(`Their email is available for contact.`); }
                if (currentUserData.mobile) { summaryPoints.push(`Their mobile number is registered.`); }
                return summaryPoints;
            }

            const SetuAI = {
                init: () => {
                    // Initialize AI widget logic here if needed
                }
            };

            // Initialize
            setupTheme();
            setupAnimationPreference(); // Initialize animation preference
            setupLogoAnimation();
            populateLanguageList();
            restoreLanguageDisplay();
            setupLanguageSwitcher();
            loadUserProfile();
            googleTranslateElementInit();

            // Event Listeners
            UI.buttons.edit.addEventListener('click', () => toggleEditMode(true));
            UI.buttons.save.addEventListener('click', saveProfileChanges);
            UI.buttons.cancel.addEventListener('click', () => toggleEditMode(false));
            UI.avatarContainer.addEventListener('click', () => { if (isEditMode) UI.avatarInput.click(); });
            UI.avatarInput.addEventListener('change', (e) => {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        UI.profile.avatar.src = e.target.result;
                        currentUserData.avatar = e.target.result;
                    };
                    reader.readAsDataURL(file);
                }
            });

            UI.settingsBtnDesktop.addEventListener('click', openSettingsPanel);
            UI.settingsBtnMobile.addEventListener('click', openSettingsPanel);
            UI.closeSettingsBtn.addEventListener('click', closeSettingsPanel);
            UI.settingsOverlay.addEventListener('click', closeSettingsPanel);

            // AI Info Modal
            const aiWidgetContainers = document.querySelectorAll('.ai-widget-container');
            aiWidgetContainers.forEach(container => {
                container.addEventListener('click', (e) => {
                    e.stopPropagation();
                    UI.aiInfoModalOverlay.classList.add('visible');
                    setTimeout(() => {
                        UI.aiInfoModal.style.opacity = '1';
                        UI.aiInfoModal.style.transform = 'scale(1)';
                    }, 10);
                });
            });

            UI.aiInfoGotItBtn.addEventListener('click', () => {
                UI.aiInfoModal.style.opacity = '0';
                UI.aiInfoModal.style.transform = 'scale(0.95)';
                setTimeout(() => {
                    UI.aiInfoModalOverlay.classList.remove('visible');
                }, 300);
            });

            UI.aiInfoModalOverlay.addEventListener('click', (e) => {
                if (e.target === UI.aiInfoModalOverlay) {
                    UI.aiInfoGotItBtn.click();
                }
            });
        });
    </script>
    <script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
    </body>

    </html>